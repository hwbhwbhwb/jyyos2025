#include <unistd.h>
#include <stdio.h>

int main() {
    char *const argv[] = {
        "/bin/bash",//执行的是bash这个程序
        // "-c",
        // "env",
        NULL,
    };

    char *const envp[] = {
        "HELLO=WORLD",
        NULL,//作用：execve函数是没有argc参数传递的，需要一个以NULL结尾的环境变量数组来告知argv结束了
    };

    // Reset the state machine to "/bin/bash"
    execve(argv[0], argv, envp);
    // 原来的状态被替换了当前进程的映像之后被摧毁，原进程的内存内容（包括代码）被完全擦除并替换,
    //加载新程序到内存中（从可执行文件中读取），设置入口点为新程序的起始位置,bash从它自己的 main 函数开始执行写在execve之后的代码不会被执行。
    // We are here only on error.
    printf("Hello, World!\n");
}
